<h1>Query Data</h1>

<%= javascript_include_tag "table" %> 

<div class="ui black huge launch right attached button" style="width: 70px;">
      <i class="icon list layout"></i>
      <span class="text" style="display: none;">Sources</span>
</div>

<div id="sidebar" class="ui left sidebar vertical floating">

	 <h1 class="ui header">Select Data<h1>
	 <div class="ui fluid vertical menu">
	 	 <% @schema.each do |title, table| %>
      <div class="header large item">
        <i class="table icon"></i>
        <%= title.capitalize %>
      </div>
      <% i = 0 %>
      <% while i + 2 < table.length %>
        <div class="menu">
          <a class="item"><%= table[i][0]%></a>
          <% i += 1 %>
        </div>
      <% end %>
     <% end %>
    </div>
</div>
		<script>
			var data = <%= @data.to_json.html_safe %>;
      var schema = <%= @schema.to_json.html_safe %>; 
      var headers = window.data.shift()
		</script>
	</div>






  


<!-- DARWISH CODE -->

 



    <div>
      <div id="grid-container"> 
        <div class="small ui button filter"> Filter </div>
        <div class="small ui button sort "> Sort </div>
        <div class="small ui button add_column"> Add Column </div>
        <div id="table" class="handsontable" style="overflow: scroll"></div>
        <!-- <textarea class="formula-builder"> </textarea> -->
      </div> 
      
    </div>


 <!-- Filter Modal -->


<script type="text/template" class="filter-row-string">
  <div class="ui three column grid filter-critera"> 
    <div class="column">
      <div class="ui segment">
        <div class="name"> <%%- temp.col_name %> </div>
      </div>
    </div>
    <div class="column">
      <div class="ui selection dropdown ui segment filter-dropdown" style="margin-left: 60px; height: 50px;">
        <input type="hidden" name="Criteria">
        <div class="text" style="margin-top: 6px"> Contains </div>
        <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item active" data-value="contains">Contains</div>
          <div class="item" data-value="start_with">Starts With</div>
          <div class="item" data-value="ends_with">Ends With</div>
          <div class="item" data-value="exactly_matches">Exactly Matches</div>
        </div>
      </div>
    </div>
    <input class= "column ui segment" style="border: 1px black">
  </div>
</script>

<script type="text/template" class="filter-row-num-date">
  <div class="ui three column grid filter-critera"> 
    <div class="column">
      <div class="ui segment">
        <div class="name"> <%%- temp.col_name %> </div>
      </div>
    </div>
    <div class="column">
      <div class="ui selection dropdown ui segment filter-dropdown" style="margin-left: 60px; height: 50px;">
        <input type="hidden" name="Criteria">
        <div class="text" style="margin-top: 6px"> Contains </div>
        <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item active" data-value="equals">Equals</div>
          <div class="item" data-value="less_than">Less Than</div>
          <div class="item" data-value="greater_than">Greater Than</div>
          <div class="item" data-value="is_in">In (Comma Separated Values) </div>
        </div>
      </div>
    </div>
    <input class= "column ui segment" style="border: 1px black">
  </div>
</script>

<script type="text/template" class="filter-row-boolean">
  <div class="ui three column grid filter-critera"> 
    <div class="column">
      <div class="ui segment">
        <div class="name"> <%%- temp.col_name %> </div>
      </div>
    </div>
    <div class="column">
      <div class="ui selection dropdown ui segment filter-dropdown" style="margin-left: 60px; height: 50px;">
        <input type="hidden" name="Criteria">
        <div class="text" style="margin-top: 6px"> is </div>
        <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item" data-value="equals">is</div>
        </div>
      </div>
    </div>
    <input class= "column ui segment" style="border: 1px black" placeholder="True or False">
  </div>
</script>

<script type="text/template" class="column-name-item">
  <div class="item" data-value="<%%- temp.col_index %>"><%%- temp.col_name %></div>
</script> 

<div class="filter ui modal">
  <i class="close icon"></i>
  <div class="header">
    Select Criteria to Filter your Data
  </div>
  <div class="content">
    <!--  inserting filter rows -->
    <div class="ui selection dropdown ui segment column_name_dropdown" style="margin-left: 60px; height: 50px;">
      <input type="hidden" name="Criteria">
      <div class="text" style="margin-top: 6px"> Add Column to Data </div>
      <i class="dropdown icon"></i>
      <div class="menu">
       <!-- inserting column names here via javascript -->
      </div>
    </div>
  </div>
  <div class="actions">
    <div class="ui button">Cancel</div>
    <div class="ui button">Submit</div>
  </div>
</div>

